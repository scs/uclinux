<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Class template offset_ptr</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="../../index.html" title="The Boost C++ Libraries BoostBook Documentation Subset">
<link rel="up" href="../../boost_interprocess_reference.html#header.boost.interprocess.offset_ptr_hpp" title="Header &lt;boost/interprocess/offset_ptr.hpp&gt;">
<link rel="prev" href="simple_seq_fit.html" title="Class template simple_seq_fit">
<link rel="next" href="operator___id2904021.html" title="Function template operator==">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../boost.png"></td>
<td align="center"><a href="../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="simple_seq_fit.html"><img src="../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../boost_interprocess_reference.html#header.boost.interprocess.offset_ptr_hpp"><img src="../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="operator___id2904021.html"><img src="../../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="refentry" lang="en">
<a name="boost.interprocess.offset_ptr"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2><span class="refentrytitle">Class template offset_ptr</span></h2>
<p>boost::interprocess::offset_ptr</p>
</div>
<h2 xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv-title">Synopsis</h2>
<div xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv"><pre class="synopsis"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> PointedType&gt; 
<span class="bold"><strong>class</strong></span> <a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a> {
<span class="bold"><strong>public</strong></span>:
  <span class="emphasis"><em>// types</em></span>
  <span class="bold"><strong>typedef</strong></span> PointedType *                   <a name="boost.interprocess.offset_ptr.pointer"></a>pointer;          
  <span class="bold"><strong>typedef</strong></span> <span class="emphasis"><em>unspecified</em></span>                     <a name="boost.interprocess.offset_ptr.reference"></a>reference;        
  <span class="bold"><strong>typedef</strong></span> PointedType                     <a name="boost.interprocess.offset_ptr.value_type"></a>value_type;       
  <span class="bold"><strong>typedef</strong></span> std::ptrdiff_t                  <a name="boost.interprocess.offset_ptr.difference_type"></a>difference_type;  
  <span class="bold"><strong>typedef</strong></span> std::random_access_iterator_tag <a name="boost.interprocess.offset_ptr.iterator_category"></a>iterator_category;

  <span class="emphasis"><em>// <a class="link" href="offset_ptr.html#boost.interprocess.offset_ptrconstruct-copy-destruct">construct/copy/destruct</a></em></span>
  <a class="link" href="offset_ptr.html#id2903788-bb">offset_ptr</a>(pointer = 0);
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> T&gt; <a class="link" href="offset_ptr.html#id2903802-bb">offset_ptr</a>(T *);
  <a class="link" href="offset_ptr.html#id2903820-bb">offset_ptr</a>(<span class="bold"><strong>const</strong></span> <a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a> &amp;);
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> T2&gt; <a class="link" href="offset_ptr.html#id2903834-bb">offset_ptr</a>(<span class="bold"><strong>const</strong></span> <a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a>&lt; T2 &gt; &amp;);
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Y&gt; <a class="link" href="offset_ptr.html#id2903858-bb">offset_ptr</a>(<span class="bold"><strong>const</strong></span> <a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a>&lt; Y &gt; &amp;, <span class="emphasis"><em>unspecified</em></span>);
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Y&gt; <a class="link" href="offset_ptr.html#id2903886-bb">offset_ptr</a>(<span class="bold"><strong>const</strong></span> <a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a>&lt; Y &gt; &amp;, <span class="emphasis"><em>unspecified</em></span>);
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Y&gt; <a class="link" href="offset_ptr.html#id2903915-bb">offset_ptr</a>(<span class="bold"><strong>const</strong></span> <a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a>&lt; Y &gt; &amp;, <span class="emphasis"><em>unspecified</em></span>);
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Y&gt; <a class="link" href="offset_ptr.html#id2903943-bb">offset_ptr</a>(<span class="bold"><strong>const</strong></span> <a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a>&lt; Y &gt; &amp;, <span class="emphasis"><em>unspecified</em></span>);
  offset_ptr&amp; <a class="link" href="offset_ptr.html#id2903972-bb"><span class="bold"><strong>operator</strong></span>=</a>(pointer);
  offset_ptr&amp; <a class="link" href="offset_ptr.html#id2903983-bb"><span class="bold"><strong>operator</strong></span>=</a>(<span class="bold"><strong>const</strong></span> <a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a> &amp;);
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> T2&gt; offset_ptr&amp; <a class="link" href="offset_ptr.html#id2903998-bb"><span class="bold"><strong>operator</strong></span>=</a>(<span class="bold"><strong>const</strong></span> <a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a>&lt; T2 &gt; &amp;);

  <span class="emphasis"><em>// <a class="link" href="offset_ptr.html#id2903540-bb">public member functions</a></em></span>
  <span class="type">pointer</span> <a class="link" href="offset_ptr.html#id2903544-bb">get</a>() <span class="bold"><strong>const</strong></span>;
  <span class="type">std::ptrdiff_t</span> <a class="link" href="offset_ptr.html#id2903556-bb">get_offset</a>() ;
  <span class="type">pointer</span> <a class="link" href="offset_ptr.html#id2903564-bb"><span class="bold"><strong>operator</strong></span>-&gt;</a>() <span class="bold"><strong>const</strong></span>;
  <span class="type">reference</span> <a class="link" href="offset_ptr.html#id2903576-bb"><span class="bold"><strong>operator</strong></span>*</a>() <span class="bold"><strong>const</strong></span>;
  <span class="type">reference</span> <a class="link" href="offset_ptr.html#id2903589-bb"><span class="bold"><strong>operator</strong></span>[]</a>(std::ptrdiff_t) <span class="bold"><strong>const</strong></span>;
  <span class="type"><a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a></span> <a class="link" href="offset_ptr.html#id2903607-bb"><span class="bold"><strong>operator</strong></span>+</a>(std::ptrdiff_t) <span class="bold"><strong>const</strong></span>;
  <span class="type"><a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a></span> <a class="link" href="offset_ptr.html#id2903626-bb"><span class="bold"><strong>operator</strong></span>-</a>(std::ptrdiff_t) <span class="bold"><strong>const</strong></span>;
  <span class="type"><a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a> &amp;</span> <a class="link" href="offset_ptr.html#id2903645-bb"><span class="bold"><strong>operator</strong></span>+=</a>(std::ptrdiff_t) ;
  <span class="type"><a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a> &amp;</span> <a class="link" href="offset_ptr.html#id2903665-bb"><span class="bold"><strong>operator</strong></span>-=</a>(std::ptrdiff_t) ;
  <span class="type"><a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a> &amp;</span> <a class="link" href="offset_ptr.html#id2903686-bb"><span class="bold"><strong>operator</strong></span>++</a>(<span class="bold"><strong>void</strong></span>) ;
  <span class="type"><a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a></span> <a class="link" href="offset_ptr.html#id2903706-bb"><span class="bold"><strong>operator</strong></span>++</a>(<span class="bold"><strong>int</strong></span>) ;
  <span class="type"><a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a> &amp;</span> <a class="link" href="offset_ptr.html#id2903724-bb"><span class="bold"><strong>operator</strong></span>--</a>(<span class="bold"><strong>void</strong></span>) ;
  <span class="type"><a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a></span> <a class="link" href="offset_ptr.html#id2903744-bb"><span class="bold"><strong>operator</strong></span>--</a>(<span class="bold"><strong>int</strong></span>) ;
  <a class="link" href="offset_ptr.html#id2903763-bb"><span class="bold"><strong>operator</strong></span> unspecified_bool_type</a>() <span class="bold"><strong>const</strong></span>;
  <span class="type"><span class="bold"><strong>bool</strong></span></span> <a class="link" href="offset_ptr.html#id2903775-bb"><span class="bold"><strong>operator</strong></span>!</a>() <span class="bold"><strong>const</strong></span>;
};</pre></div>
<div class="refsect1" lang="en">
<a name="id3130799"></a><h2>Description</h2>
<p>A smart pointer that stores the offset between between the pointer and the the object it points. This allows offset allows special properties, since the pointer is independent from the address address of the pointee, if the pointer and the pointee are still separated by the same offset. This feature converts offset_ptr in a smart pointer that can be placed in shared memory and memory mapped files mapped in different addresses in every process. </p>
<div class="refsect2" lang="en">
<a name="id3130812"></a><h3>
<a name="boost.interprocess.offset_ptrconstruct-copy-destruct"></a><code class="computeroutput">offset_ptr</code> 
        public
       construct/copy/destruct</h3>
<div class="orderedlist"><ol type="1">
<li>
<pre class="literallayout"><a name="id2903788-bb"></a>offset_ptr(pointer ptr = 0);</pre>
<p>Constructor from raw pointer (allows "0" pointer conversion). Never throws. </p>
</li>
<li>
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> T&gt; <a name="id2903802-bb"></a>offset_ptr(T * ptr);</pre>
<p>Constructor from other pointer. Never throws. </p>
</li>
<li>
<pre class="literallayout"><a name="id2903820-bb"></a>offset_ptr(<span class="bold"><strong>const</strong></span> <a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a> &amp; ptr);</pre>
<p>Constructor from other offset_ptr Never throws. </p>
</li>
<li>
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> T2&gt; <a name="id2903834-bb"></a>offset_ptr(<span class="bold"><strong>const</strong></span> <a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a>&lt; T2 &gt; &amp; ptr);</pre>
<p>Constructor from other offset_ptr. If pointers of pointee types are convertible, offset_ptrs will be convertibles. Never throws. </p>
</li>
<li>
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Y&gt; <a name="id2903858-bb"></a>offset_ptr(<span class="bold"><strong>const</strong></span> <a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a>&lt; Y &gt; &amp; r, <span class="emphasis"><em>unspecified</em></span>);</pre>
<p>Emulates static_cast operator. Never throws. </p>
</li>
<li>
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Y&gt; <a name="id2903886-bb"></a>offset_ptr(<span class="bold"><strong>const</strong></span> <a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a>&lt; Y &gt; &amp; r, <span class="emphasis"><em>unspecified</em></span>);</pre>
<p>Emulates const_cast operator. Never throws. </p>
</li>
<li>
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Y&gt; <a name="id2903915-bb"></a>offset_ptr(<span class="bold"><strong>const</strong></span> <a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a>&lt; Y &gt; &amp; r, <span class="emphasis"><em>unspecified</em></span>);</pre>
<p>Emulates dynamic_cast operator. Never throws. </p>
</li>
<li>
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Y&gt; <a name="id2903943-bb"></a>offset_ptr(<span class="bold"><strong>const</strong></span> <a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a>&lt; Y &gt; &amp; r, <span class="emphasis"><em>unspecified</em></span>);</pre>
<p>Emulates reinterpret_cast operator. Never throws. </p>
</li>
<li>
<pre class="literallayout">offset_ptr&amp; <a name="id2903972-bb"></a><span class="bold"><strong>operator</strong></span>=(pointer from);</pre>
<p>Assignment from pointer (saves extra conversion). Never throws. </p>
</li>
<li>
<pre class="literallayout">offset_ptr&amp; <a name="id2903983-bb"></a><span class="bold"><strong>operator</strong></span>=(<span class="bold"><strong>const</strong></span> <a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a> &amp; pt);</pre>
<p>Assignment from other offset_ptr. Never throws. </p>
</li>
<li>
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> T2&gt; offset_ptr&amp; <a name="id2903998-bb"></a><span class="bold"><strong>operator</strong></span>=(<span class="bold"><strong>const</strong></span> <a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a>&lt; T2 &gt; &amp; pt);</pre>
<p>Assignment from related offset_ptr. If pointers of pointee types are assignable, offset_ptrs will be assignable. Never throws. </p>
</li>
</ol></div>
</div>
<div class="refsect2" lang="en">
<a name="id3131249"></a><h3>
<a name="id2903540-bb"></a><code class="computeroutput">offset_ptr</code> public member functions</h3>
<div class="orderedlist"><ol type="1">
<li>
<pre class="literallayout"><span class="type">pointer</span> <a name="id2903544-bb"></a>get() <span class="bold"><strong>const</strong></span>;</pre>
<p>Obtains raw pointer from offset. Never throws. </p>
</li>
<li><pre class="literallayout"><span class="type">std::ptrdiff_t</span> <a name="id2903556-bb"></a>get_offset() ;</pre></li>
<li>
<pre class="literallayout"><span class="type">pointer</span> <a name="id2903564-bb"></a><span class="bold"><strong>operator</strong></span>-&gt;() <span class="bold"><strong>const</strong></span>;</pre>
<p>Pointer-like -&gt; operator. It can return 0 pointer. Never throws. </p>
</li>
<li>
<pre class="literallayout"><span class="type">reference</span> <a name="id2903576-bb"></a><span class="bold"><strong>operator</strong></span>*() <span class="bold"><strong>const</strong></span>;</pre>
<p>Dereferencing operator, if it is a null offset_ptr behavior is undefined. Never throws. </p>
</li>
<li>
<pre class="literallayout"><span class="type">reference</span> <a name="id2903589-bb"></a><span class="bold"><strong>operator</strong></span>[](std::ptrdiff_t idx) <span class="bold"><strong>const</strong></span>;</pre>
<p>Indexing operator. Never throws. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a></span> <a name="id2903607-bb"></a><span class="bold"><strong>operator</strong></span>+(std::ptrdiff_t offset) <span class="bold"><strong>const</strong></span>;</pre>
<p>offset_ptr + std::ptrdiff_t. Never throws. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a></span> <a name="id2903626-bb"></a><span class="bold"><strong>operator</strong></span>-(std::ptrdiff_t offset) <span class="bold"><strong>const</strong></span>;</pre>
<p>offset_ptr - std::ptrdiff_t. Never throws. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a> &amp;</span> <a name="id2903645-bb"></a><span class="bold"><strong>operator</strong></span>+=(std::ptrdiff_t offset) ;</pre>
<p>offset_ptr += std::ptrdiff_t. Never throws. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a> &amp;</span> <a name="id2903665-bb"></a><span class="bold"><strong>operator</strong></span>-=(std::ptrdiff_t offset) ;</pre>
<p>offset_ptr -= std::ptrdiff_t. Never throws. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a> &amp;</span> <a name="id2903686-bb"></a><span class="bold"><strong>operator</strong></span>++(<span class="bold"><strong>void</strong></span>) ;</pre>
<p>++offset_ptr. Never throws. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a></span> <a name="id2903706-bb"></a><span class="bold"><strong>operator</strong></span>++(<span class="bold"><strong>int</strong></span>) ;</pre>
<p>offset_ptr++. Never throws. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a> &amp;</span> <a name="id2903724-bb"></a><span class="bold"><strong>operator</strong></span>--(<span class="bold"><strong>void</strong></span>) ;</pre>
<p>--offset_ptr. Never throws. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><a class="link" href="offset_ptr.html" title="Class template offset_ptr">offset_ptr</a></span> <a name="id2903744-bb"></a><span class="bold"><strong>operator</strong></span>--(<span class="bold"><strong>int</strong></span>) ;</pre>
<p>offset_ptr--. Never throws. </p>
</li>
<li>
<pre class="literallayout"><a name="id2903763-bb"></a><span class="bold"><strong>operator</strong></span> unspecified_bool_type() <span class="bold"><strong>const</strong></span>;</pre>
<p>safe bool conversion operator. Never throws. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>bool</strong></span></span> <a name="id2903775-bb"></a><span class="bold"><strong>operator</strong></span>!() <span class="bold"><strong>const</strong></span>;</pre>
<p>Not operator. Not needed in theory, but improves portability. Never throws </p>
</li>
</ol></div>
</div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2005 - 2007 Ion Gaztañaga<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="simple_seq_fit.html"><img src="../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../boost_interprocess_reference.html#header.boost.interprocess.offset_ptr_hpp"><img src="../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="operator___id2904021.html"><img src="../../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
